(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))_(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&_(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function _(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();var z,m,be,M,le,ke,Ce,$e,ne,Q,Z,A={},Se=[],Oe=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,J=Array.isArray;function P(e,t){for(var n in t)e[n]=t[n];return e}function _e(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Be(e,t,n){var _,i,r,s={};for(r in t)r=="key"?_=t[r]:r=="ref"?i=t[r]:s[r]=t[r];if(arguments.length>2&&(s.children=arguments.length>3?z.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(r in e.defaultProps)s[r]===void 0&&(s[r]=e.defaultProps[r]);return R(e,s,_,i,null)}function R(e,t,n,_,i){var r={type:e,props:t,key:n,ref:_,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++be,__i:-1,__u:0};return i==null&&m.vnode!=null&&m.vnode(r),r}function G(e){return e.children}function W(e,t){this.props=e,this.context=t}function D(e,t){if(t==null)return e.__?D(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?D(e):null}function xe(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return xe(e)}}function ce(e){(!e.__d&&(e.__d=!0)&&M.push(e)&&!q.__r++||le!=m.debounceRendering)&&((le=m.debounceRendering)||ke)(q)}function q(){for(var e,t,n,_,i,r,s,c=1;M.length;)M.length>c&&M.sort(Ce),e=M.shift(),c=M.length,e.__d&&(n=void 0,_=void 0,i=(_=(t=e).__v).__e,r=[],s=[],t.__P&&((n=P({},_)).__v=_.__v+1,m.vnode&&m.vnode(n),re(t.__P,n,_,t.__n,t.__P.namespaceURI,32&_.__u?[i]:null,r,i??D(_),!!(32&_.__u),s),n.__v=_.__v,n.__.__k[n.__i]=n,Ne(r,n,s),_.__e=_.__=null,n.__e!=i&&xe(n)));q.__r=0}function Pe(e,t,n,_,i,r,s,c,u,l,f){var o,d,h,y,C,w,v,p=_&&_.__k||Se,S=t.length;for(u=Re(n,t,p,u,S),o=0;o<S;o++)(h=n.__k[o])!=null&&(d=h.__i==-1?A:p[h.__i]||A,h.__i=o,w=re(e,h,d,i,r,s,c,u,l,f),y=h.__e,h.ref&&d.ref!=h.ref&&(d.ref&&oe(d.ref,null,h),f.push(h.ref,h.__c||y,h)),C==null&&y!=null&&(C=y),(v=!!(4&h.__u))||d.__k===h.__k?u=Ee(h,u,e,v):typeof h.type=="function"&&w!==void 0?u=w:y&&(u=y.nextSibling),h.__u&=-7);return n.__e=C,u}function Re(e,t,n,_,i){var r,s,c,u,l,f=n.length,o=f,d=0;for(e.__k=new Array(i),r=0;r<i;r++)(s=t[r])!=null&&typeof s!="boolean"&&typeof s!="function"?(typeof s=="string"||typeof s=="number"||typeof s=="bigint"||s.constructor==String?s=e.__k[r]=R(null,s,null,null,null):J(s)?s=e.__k[r]=R(G,{children:s},null,null,null):s.constructor===void 0&&s.__b>0?s=e.__k[r]=R(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):e.__k[r]=s,u=r+d,s.__=e,s.__b=e.__b+1,c=null,(l=s.__i=We(s,n,u,o))!=-1&&(o--,(c=n[l])&&(c.__u|=2)),c==null||c.__v==null?(l==-1&&(i>f?d--:i<f&&d++),typeof s.type!="function"&&(s.__u|=4)):l!=u&&(l==u-1?d--:l==u+1?d++:(l>u?d--:d++,s.__u|=4))):e.__k[r]=null;if(o)for(r=0;r<f;r++)(c=n[r])!=null&&(2&c.__u)==0&&(c.__e==_&&(_=D(c)),He(c,c));return _}function Ee(e,t,n,_){var i,r;if(typeof e.type=="function"){for(i=e.__k,r=0;i&&r<i.length;r++)i[r]&&(i[r].__=e,t=Ee(i[r],t,n,_));return t}e.__e!=t&&(_&&(t&&e.type&&!t.parentNode&&(t=D(e)),n.insertBefore(e.__e,t||null)),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function We(e,t,n,_){var i,r,s,c=e.key,u=e.type,l=t[n],f=l!=null&&(2&l.__u)==0;if(l===null&&c==null||f&&c==l.key&&u==l.type)return n;if(_>(f?1:0)){for(i=n-1,r=n+1;i>=0||r<t.length;)if((l=t[s=i>=0?i--:r++])!=null&&(2&l.__u)==0&&c==l.key&&u==l.type)return s}return-1}function ae(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||Oe.test(t)?n:n+"px"}function B(e,t,n,_,i){var r,s;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof _=="string"&&(e.style.cssText=_=""),_)for(t in _)n&&t in n||ae(e.style,t,"");if(n)for(t in n)_&&n[t]==_[t]||ae(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")r=t!=(t=t.replace($e,"$1")),s=t.toLowerCase(),t=s in e||t=="onFocusOut"||t=="onFocusIn"?s.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+r]=n,n?_?n.u=_.u:(n.u=ne,e.addEventListener(t,r?Z:Q,r)):e.removeEventListener(t,r?Z:Q,r);else{if(i=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function ue(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=ne++;else if(t.t<n.u)return;return n(m.event?m.event(t):t)}}}function re(e,t,n,_,i,r,s,c,u,l){var f,o,d,h,y,C,w,v,p,S,k,$,E,T,N,U,V,x=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(u=!!(32&n.__u),r=[c=t.__e=n.__e]),(f=m.__b)&&f(t);e:if(typeof x=="function")try{if(v=t.props,p="prototype"in x&&x.prototype.render,S=(f=x.contextType)&&_[f.__c],k=f?S?S.props.value:f.__:_,n.__c?w=(o=t.__c=n.__c).__=o.__E:(p?t.__c=o=new x(v,k):(t.__c=o=new W(v,k),o.constructor=x,o.render=qe),S&&S.sub(o),o.state||(o.state={}),o.__n=_,d=o.__d=!0,o.__h=[],o._sb=[]),p&&o.__s==null&&(o.__s=o.state),p&&x.getDerivedStateFromProps!=null&&(o.__s==o.state&&(o.__s=P({},o.__s)),P(o.__s,x.getDerivedStateFromProps(v,o.__s))),h=o.props,y=o.state,o.__v=t,d)p&&x.getDerivedStateFromProps==null&&o.componentWillMount!=null&&o.componentWillMount(),p&&o.componentDidMount!=null&&o.__h.push(o.componentDidMount);else{if(p&&x.getDerivedStateFromProps==null&&v!==h&&o.componentWillReceiveProps!=null&&o.componentWillReceiveProps(v,k),t.__v==n.__v||!o.__e&&o.shouldComponentUpdate!=null&&o.shouldComponentUpdate(v,o.__s,k)===!1){for(t.__v!=n.__v&&(o.props=v,o.state=o.__s,o.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(I){I&&(I.__=t)}),$=0;$<o._sb.length;$++)o.__h.push(o._sb[$]);o._sb=[],o.__h.length&&s.push(o);break e}o.componentWillUpdate!=null&&o.componentWillUpdate(v,o.__s,k),p&&o.componentDidUpdate!=null&&o.__h.push(function(){o.componentDidUpdate(h,y,C)})}if(o.context=k,o.props=v,o.__P=e,o.__e=!1,E=m.__r,T=0,p){for(o.state=o.__s,o.__d=!1,E&&E(t),f=o.render(o.props,o.state,o.context),N=0;N<o._sb.length;N++)o.__h.push(o._sb[N]);o._sb=[]}else do o.__d=!1,E&&E(t),f=o.render(o.props,o.state,o.context),o.state=o.__s;while(o.__d&&++T<25);o.state=o.__s,o.getChildContext!=null&&(_=P(P({},_),o.getChildContext())),p&&!d&&o.getSnapshotBeforeUpdate!=null&&(C=o.getSnapshotBeforeUpdate(h,y)),U=f,f!=null&&f.type===G&&f.key==null&&(U=Me(f.props.children)),c=Pe(e,J(U)?U:[U],t,n,_,i,r,s,c,u,l),o.base=t.__e,t.__u&=-161,o.__h.length&&s.push(o),w&&(o.__E=o.__=null)}catch(I){if(t.__v=null,u||r!=null)if(I.then){for(t.__u|=u?160:128;c&&c.nodeType==8&&c.nextSibling;)c=c.nextSibling;r[r.indexOf(c)]=null,t.__e=c}else{for(V=r.length;V--;)_e(r[V]);K(t)}else t.__e=n.__e,t.__k=n.__k,I.then||K(t);m.__e(I,t,n)}else r==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):c=t.__e=je(n.__e,t,n,_,i,r,s,u,l);return(f=m.diffed)&&f(t),128&t.__u?void 0:c}function K(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(K)}function Ne(e,t,n){for(var _=0;_<n.length;_++)oe(n[_],n[++_],n[++_]);m.__c&&m.__c(t,e),e.some(function(i){try{e=i.__h,i.__h=[],e.some(function(r){r.call(i)})}catch(r){m.__e(r,i.__v)}})}function Me(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:J(e)?e.map(Me):P({},e)}function je(e,t,n,_,i,r,s,c,u){var l,f,o,d,h,y,C,w=n.props||A,v=t.props,p=t.type;if(p=="svg"?i="http://www.w3.org/2000/svg":p=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),r!=null){for(l=0;l<r.length;l++)if((h=r[l])&&"setAttribute"in h==!!p&&(p?h.localName==p:h.nodeType==3)){e=h,r[l]=null;break}}if(e==null){if(p==null)return document.createTextNode(v);e=document.createElementNS(i,p,v.is&&v),c&&(m.__m&&m.__m(t,r),c=!1),r=null}if(p==null)w===v||c&&e.data==v||(e.data=v);else{if(r=r&&z.call(e.childNodes),!c&&r!=null)for(w={},l=0;l<e.attributes.length;l++)w[(h=e.attributes[l]).name]=h.value;for(l in w)if(h=w[l],l!="children"){if(l=="dangerouslySetInnerHTML")o=h;else if(!(l in v)){if(l=="value"&&"defaultValue"in v||l=="checked"&&"defaultChecked"in v)continue;B(e,l,null,h,i)}}for(l in v)h=v[l],l=="children"?d=h:l=="dangerouslySetInnerHTML"?f=h:l=="value"?y=h:l=="checked"?C=h:c&&typeof h!="function"||w[l]===h||B(e,l,h,w[l],i);if(f)c||o&&(f.__html==o.__html||f.__html==e.innerHTML)||(e.innerHTML=f.__html),t.__k=[];else if(o&&(e.innerHTML=""),Pe(t.type=="template"?e.content:e,J(d)?d:[d],t,n,_,p=="foreignObject"?"http://www.w3.org/1999/xhtml":i,r,s,r?r[0]:n.__k&&D(n,0),c,u),r!=null)for(l=r.length;l--;)_e(r[l]);c||(l="value",p=="progress"&&y==null?e.removeAttribute("value"):y!=null&&(y!==e[l]||p=="progress"&&!y||p=="option"&&y!=w[l])&&B(e,l,y,w[l],i),l="checked",C!=null&&C!=e[l]&&B(e,l,C,w[l],i))}return e}function oe(e,t,n){try{if(typeof e=="function"){var _=typeof e.__u=="function";_&&e.__u(),_&&t==null||(e.__u=e(t))}else e.current=t}catch(i){m.__e(i,n)}}function He(e,t,n){var _,i;if(m.unmount&&m.unmount(e),(_=e.ref)&&(_.current&&_.current!=e.__e||oe(_,null,t)),(_=e.__c)!=null){if(_.componentWillUnmount)try{_.componentWillUnmount()}catch(r){m.__e(r,t)}_.base=_.__P=null}if(_=e.__k)for(i=0;i<_.length;i++)_[i]&&He(_[i],t,n||typeof e.type!="function");n||_e(e.__e),e.__c=e.__=e.__e=void 0}function qe(e,t,n){return this.constructor(e,n)}function ze(e,t,n){var _,i,r,s;t==document&&(t=document.documentElement),m.__&&m.__(e,t),i=(_=!1)?null:t.__k,r=[],s=[],re(t,e=t.__k=Be(G,null,[e]),i||A,A,t.namespaceURI,i?null:t.firstChild?z.call(t.childNodes):null,r,i?i.__e:t.firstChild,_,s),Ne(r,e,s)}z=Se.slice,m={__e:function(e,t,n,_){for(var i,r,s;t=t.__;)if((i=t.__c)&&!i.__)try{if((r=i.constructor)&&r.getDerivedStateFromError!=null&&(i.setState(r.getDerivedStateFromError(e)),s=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(e,_||{}),s=i.__d),s)return i.__E=i}catch(c){e=c}throw e}},be=0,W.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=P({},this.state),typeof e=="function"&&(e=e(P({},n),this.props)),e&&P(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),ce(this))},W.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),ce(this))},W.prototype.render=G,M=[],ke=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ce=function(e,t){return e.__v.__b-t.__v.__b},q.__r=0,$e=/(PointerCapture)$|Capture$/i,ne=0,Q=ue(!1),Z=ue(!0);var Je=0;function a(e,t,n,_,i,r){t||(t={});var s,c,u=t;if("ref"in u)for(c in u={},t)c=="ref"?s=t[c]:u[c]=t[c];var l={type:e,props:u,key:n,ref:s,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Je,__i:-1,__u:0,__source:i,__self:r};if(typeof e=="function"&&(s=e.defaultProps))for(c in s)u[c]===void 0&&(u[c]=s[c]);return m.vnode&&m.vnode(l),l}let Ie="";function Ge(e){Ie=e.replace(/\/$/,"")}async function ie(e,t={}){const n=await fetch(`${Ie}${e}`,t);if(!n.ok){const _=await n.json().catch(()=>({}));throw new Error((_==null?void 0:_.detail)||`Request failed (${n.status})`)}return n.json()}function Ve(e){return ie(`/public/widget-config?widget_key=${encodeURIComponent(e)}`)}function Xe(e,t="web_widget",n){return ie("/public/conversation/start",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({widget_key:e,channel:t,locale:n,page_url:window.location.href})})}function Ye(e,t,n,_){return ie("/public/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({widget_key:e,conversation_id:t,message:n,locale:_})})}var F,g,X,he,O=0,De=[],b=m,fe=b.__b,de=b.__r,pe=b.diffed,ve=b.__c,me=b.unmount,ge=b.__;function se(e,t){b.__h&&b.__h(g,e,O||t),O=0;var n=g.__H||(g.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function H(e){return O=1,Qe(Fe,e)}function Qe(e,t,n){var _=se(F++,2);if(_.t=e,!_.__c&&(_.__=[Fe(void 0,t),function(c){var u=_.__N?_.__N[0]:_.__[0],l=_.t(u,c);u!==l&&(_.__N=[l,_.__[1]],_.__c.setState({}))}],_.__c=g,!g.__f)){var i=function(c,u,l){if(!_.__c.__H)return!0;var f=_.__c.__H.__.filter(function(d){return!!d.__c});if(f.every(function(d){return!d.__N}))return!r||r.call(this,c,u,l);var o=_.__c.props!==c;return f.forEach(function(d){if(d.__N){var h=d.__[0];d.__=d.__N,d.__N=void 0,h!==d.__[0]&&(o=!0)}}),r&&r.call(this,c,u,l)||o};g.__f=!0;var r=g.shouldComponentUpdate,s=g.componentWillUpdate;g.componentWillUpdate=function(c,u,l){if(this.__e){var f=r;r=void 0,i(c,u,l),r=f}s&&s.call(this,c,u,l)},g.shouldComponentUpdate=i}return _.__N||_.__}function Te(e,t){var n=se(F++,3);!b.__s&&Ae(n.__H,t)&&(n.__=e,n.u=t,g.__H.__h.push(n))}function Ue(e){return O=5,Le(function(){return{current:e}},[])}function Le(e,t){var n=se(F++,7);return Ae(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function Y(e,t){return O=8,Le(function(){return e},t)}function Ze(){for(var e;e=De.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(j),e.__H.__h.forEach(ee),e.__H.__h=[]}catch(t){e.__H.__h=[],b.__e(t,e.__v)}}b.__b=function(e){g=null,fe&&fe(e)},b.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),ge&&ge(e,t)},b.__r=function(e){de&&de(e),F=0;var t=(g=e.__c).__H;t&&(X===g?(t.__h=[],g.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(t.__h.forEach(j),t.__h.forEach(ee),t.__h=[],F=0)),X=g},b.diffed=function(e){pe&&pe(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(De.push(t)!==1&&he===b.requestAnimationFrame||((he=b.requestAnimationFrame)||Ke)(Ze)),t.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),X=g=null},b.__c=function(e,t){t.some(function(n){try{n.__h.forEach(j),n.__h=n.__h.filter(function(_){return!_.__||ee(_)})}catch(_){t.some(function(i){i.__h&&(i.__h=[])}),t=[],b.__e(_,n.__v)}}),ve&&ve(e,t)},b.unmount=function(e){me&&me(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(_){try{j(_)}catch(i){t=i}}),n.__H=void 0,t&&b.__e(t,n.__v))};var ye=typeof requestAnimationFrame=="function";function Ke(e){var t,n=function(){clearTimeout(_),ye&&cancelAnimationFrame(t),setTimeout(e)},_=setTimeout(n,35);ye&&(t=requestAnimationFrame(n))}function j(e){var t=g,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),g=t}function ee(e){var t=g;e.__c=e.__(),g=t}function Ae(e,t){return!e||e.length!==t.length||t.some(function(n,_){return n!==e[_]})}function Fe(e,t){return typeof t=="function"?t(e):t}function et(e){const[t,n]=H(null),[_,i]=H(null);return Te(()=>{if(!e){i("No widget key provided");return}Ve(e).then(n).catch(r=>i(r.message))},[e]),{config:t,error:_}}const tt=1440*60*1e3;function L(e){return`hotel_chat_${e}`}function nt(e){try{return localStorage.getItem(e)}catch{return null}}function _t(e,t){try{localStorage.setItem(e,t)}catch{}}function te(e){try{localStorage.removeItem(e)}catch{}}function rt(e){const t=nt(L(e));if(!t)return null;try{const n=JSON.parse(t);return Date.now()-n.updated_at>tt?(te(L(e)),null):n}catch{return te(L(e)),null}}function ot(e,t,n){const _={conversation_id:t,messages:n.slice(-50),updated_at:Date.now()};_t(L(e),JSON.stringify(_))}function we(e){te(L(e))}function it({widgetKey:e,locale:t,channel:n="web_widget",config:_}){var w;const i=Ue(rt(e)),[r,s]=H(((w=i.current)==null?void 0:w.conversation_id)||null),[c,u]=H(()=>{var p;return((p=i.current)==null?void 0:p.messages)||[]}),[l,f]=H(!1),[o,d]=H(null),h=Y(v=>{u(p=>p.length>0?p:[{id:"greeting",role:"assistant",content:v,timestamp:Date.now()}])},[]);_!=null&&_.greeting_message&&c.length===0&&h(_.greeting_message);const y=Y(async v=>{var S;if(!v.trim()||l)return;d(null),f(!0);const p={id:`user-${Date.now()}`,role:"user",content:v,timestamp:Date.now()};u(k=>[...k,p]);try{let k=r;k||(k=(await Xe(e,n,t)).conversation_id,s(k));const $=await Ye(e,k,v,t),E={id:`assistant-${Date.now()}`,role:"assistant",content:$.answer_text||((S=$.escalation)==null?void 0:S.message)||"I'm sorry, I couldn't find an answer.",escalation:$.escalation,citations:$.citations,timestamp:Date.now()};u(T=>{const N=[...T,E];return ot(e,k,N),N})}catch(k){const $=k instanceof Error?k.message:"Something went wrong";$.includes("not found")||$.includes("404")?(s(null),we(e),d("Session expired. Please send your message again.")):d($)}finally{f(!1)}},[r,e,t,n,l]),C=Y(()=>{s(null),u([]),we(e),d(null),_!=null&&_.greeting_message&&h(_.greeting_message)},[e,_,h]);return{messages:c,sending:l,error:o,send:y,restart:C}}function st({message:e}){const t=e.role==="user";return a("div",{class:`hcw-message ${t?"hcw-message--user":"hcw-message--assistant"}`,children:a("div",{class:`hcw-bubble ${t?"hcw-bubble--user":"hcw-bubble--assistant"}`,children:[a("p",{children:e.content}),e.citations&&e.citations.length>0&&a("div",{class:"hcw-citations",children:e.citations.map(n=>a("span",{class:"hcw-citation-tag",children:n.title},n.chunk_id))})]})})}function lt({escalation:e}){return a("div",{class:"hcw-escalation",children:[a("p",{class:"hcw-escalation__message",children:e.message}),a("div",{class:"hcw-escalation__actions",children:[e.phone&&a("a",{href:`tel:${e.phone}`,class:"hcw-escalation__btn",children:[a(ct,{}),e.phone]}),e.email&&a("a",{href:`mailto:${e.email}`,class:"hcw-escalation__btn",children:[a(at,{}),e.email]})]})]})}function ct(){return a("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",children:a("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72c.127.96.361 1.903.7 2.81a2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45c.907.339 1.85.573 2.81.7A2 2 0 0 1 22 16.92z"})})}function at(){return a("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",children:[a("rect",{x:"2",y:"4",width:"20",height:"16",rx:"2"}),a("path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"})]})}function ut(){return a("div",{class:"hcw-message hcw-message--assistant",children:a("div",{class:"hcw-bubble hcw-bubble--assistant hcw-typing",children:[a("span",{class:"hcw-dot"}),a("span",{class:"hcw-dot"}),a("span",{class:"hcw-dot"})]})})}function ht({messages:e,sending:t}){const n=Ue(null);return Te(()=>{var _;(_=n.current)==null||_.scrollIntoView({behavior:"smooth"})},[e.length,t]),a("div",{class:"hcw-messages",children:[e.map(_=>a("div",{children:[a(st,{message:_}),_.escalation&&a(lt,{escalation:_.escalation})]},_.id)),t&&a(ut,{}),a("div",{ref:n})]})}function ft({message:e}){return a("div",{class:"hcw-error",children:a("span",{children:e})})}function dt({messages:e,sending:t,error:n,onSend:_,onClose:i,onRestart:r,title:s}){const[c,u]=H(""),l=o=>{o.preventDefault(),c.trim()&&(_(c.trim()),u(""))};return a("div",{class:"hcw-panel",children:[a("div",{class:"hcw-header",children:[a("span",{class:"hcw-header__title",children:s||"Chat"}),a("div",{class:"hcw-header__actions",children:[a("button",{class:"hcw-header__btn",onClick:r,title:"New conversation","aria-label":"New conversation",children:a(pt,{})}),i&&a("button",{class:"hcw-header__btn",onClick:i,title:"Close","aria-label":"Close chat",children:a(vt,{})})]})]}),a(ht,{messages:e,sending:t}),n&&a(ft,{message:n}),a("form",{class:"hcw-input",onSubmit:l,children:[a("input",{type:"text",class:"hcw-input__field",value:c,onInput:o=>u(o.target.value),onKeyDown:o=>{o.key==="Enter"&&!o.shiftKey&&(o.preventDefault(),l(o))},placeholder:"Type a message...",disabled:t,"aria-label":"Message input"}),a("button",{type:"submit",class:"hcw-input__send",disabled:t||!c.trim(),"aria-label":"Send message",children:a(mt,{})})]})]})}function pt(){return a("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",children:[a("path",{d:"M3 12a9 9 0 1 1 9 9"}),a("path",{d:"M3 21v-6h6"})]})}function vt(){return a("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",children:a("path",{d:"M18 6 6 18M6 6l12 12"})})}function mt(){return a("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",children:[a("path",{d:"m22 2-7 20-4-9-9-4z"}),a("path",{d:"m22 2-11 11"})]})}function gt(){const e=new URLSearchParams(window.location.search),t=e.get("key")||"",n=e.get("locale")||"en",_=e.get("api")||window.location.origin;if(!t)return a("div",{class:"hcw-standalone-error",children:["Missing ",a("code",{children:"key"})," parameter. Use ",a("code",{children:"/chat?key=wk_xxx"})]});Ge(_);const{config:i,error:r}=et(t),{messages:s,sending:c,error:u,send:l,restart:f}=it({widgetKey:t,locale:n,channel:"web_url",config:i});return r?a("div",{class:"hcw-standalone-error",children:["Failed to load widget: ",r]}):a(dt,{messages:s,sending:c,error:u,onSend:l,onRestart:f,title:"Chat"})}ze(a(gt,{}),document.getElementById("app"));
