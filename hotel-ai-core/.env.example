# =============================================================================
# Hotel AI Core — Environment Variables
# =============================================================================
# Copy this file to .env and fill in your values.
# The .env file is loaded by pydantic-settings and should NOT be committed.
#
# Two deployment modes are shown below:
#   1. LOCAL  — Docker Compose (MinIO, local Postgres, local Redis)
#   2. CLOUD  — Railway + Neon + Upstash + Cloudflare R2 (or AWS S3)
#
# Uncomment the section that matches your environment.
# =============================================================================


# ── DATABASE ─────────────────────────────────────────────────────────────────
# LOCAL: Docker Compose Postgres
DATABASE_URL=postgresql+asyncpg://hotel_ai:hotel_ai_pass@db:5432/hotel_ai
DATABASE_URL_SYNC=postgresql://hotel_ai:hotel_ai_pass@db:5432/hotel_ai

# CLOUD: Neon (use NON-POOLER URL — no "-pooler" in hostname)
#   - DATABASE_URL must use postgresql+asyncpg:// and ?ssl=require
#   - DATABASE_URL_SYNC must use postgresql:// and ?sslmode=require
#   - Do NOT include channel_binding=require (causes hangs)
# DATABASE_URL=postgresql+asyncpg://<user>:<password>@<host>.neon.tech/<dbname>?ssl=require
# DATABASE_URL_SYNC=postgresql://<user>:<password>@<host>.neon.tech/<dbname>?sslmode=require


# ── REDIS ────────────────────────────────────────────────────────────────────
# LOCAL: Docker Compose Redis
REDIS_URL=redis://redis:6379/0

# CLOUD: Upstash (note double 's' in rediss:// for TLS)
# REDIS_URL=rediss://default:<password>@<host>.upstash.io:6379


# ── AUTH ─────────────────────────────────────────────────────────────────────
# Generate a strong secret: openssl rand -hex 32
JWT_SECRET_KEY=change-me-in-production
JWT_ALGORITHM=HS256
JWT_EXPIRATION_MINUTES=60


# ── OPENAI ───────────────────────────────────────────────────────────────────
OPENAI_API_KEY=sk-your-key-here
OPENAI_EMBEDDING_MODEL=text-embedding-3-small
OPENAI_CHAT_MODEL=gpt-4o-mini


# ── RAG ──────────────────────────────────────────────────────────────────────
RAG_TOP_K=8
RAG_CONFIDENCE_THRESHOLD=0.30


# ── OBJECT STORAGE ───────────────────────────────────────────────────────────
# LOCAL: MinIO (Docker Compose)
S3_ENDPOINT_URL=http://minio:9000
S3_ACCESS_KEY=minioadmin
S3_SECRET_KEY=minioadmin
S3_BUCKET_NAME=hotel-ai-kb
S3_REGION=us-east-1

# CLOUD Option A: AWS S3 (leave S3_ENDPOINT_URL empty)
# S3_ENDPOINT_URL=
# S3_ACCESS_KEY=<your-aws-access-key-id>
# S3_SECRET_KEY=<your-aws-secret-access-key>
# S3_BUCKET_NAME=<your-bucket-name>
# S3_REGION=us-east-1

# CLOUD Option B: Cloudflare R2 (S3-compatible, 10GB always-free)
#   Create API token: Cloudflare dashboard > R2 > Manage R2 API Tokens
#   Endpoint URL is just the base URL — do NOT include the bucket name
# S3_ENDPOINT_URL=https://<account-id>.r2.cloudflarestorage.com
# S3_ACCESS_KEY=<r2-access-key-id>
# S3_SECRET_KEY=<r2-secret-access-key>
# S3_BUCKET_NAME=<your-bucket-name>
# S3_REGION=auto


# ── APP ──────────────────────────────────────────────────────────────────────
APP_ENV=development
LOG_LEVEL=INFO

# LOCAL:
CORS_ORIGINS=["http://localhost:3000","http://localhost:3001"]

# CLOUD: Update with your actual Vercel URLs after deploying
# CORS_ORIGINS=["https://<admin-web>.vercel.app","https://<frontend>.vercel.app"]
